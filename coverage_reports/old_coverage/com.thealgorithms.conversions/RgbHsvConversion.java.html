<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>RgbHsvConversion.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Java</a> &gt; <a href="index.source.html" class="el_package">com.thealgorithms.conversions</a> &gt; <span class="el_source">RgbHsvConversion.java</span></div><h1>RgbHsvConversion.java</h1><pre class="source lang-java linenums">package com.thealgorithms.conversions;

import java.util.Arrays;

/**
 * The RGB color model is an additive color model in which red, green, and blue
 * light are added together in various ways to reproduce a broad array of
 * colors. The name of the model comes from the initials of the three additive
 * primary colors, red, green, and blue. Meanwhile, the HSV representation
 * models how colors appear under light. In it, colors are represented using
 * three components: hue, saturation and (brightness-)value. This class provides
 * methods for converting colors from one representation to the other.
 * (description adapted from https://en.wikipedia.org/wiki/RGB_color_model and
 * https://en.wikipedia.org/wiki/HSL_and_HSV).
 */
<span class="nc bnc" id="L16" title="All 2 branches missed.">public class RgbHsvConversion {</span>

    public static void main(String[] args) {
        // Expected RGB-values taken from https://www.rapidtables.com/convert/color/hsv-to-rgb.html

        // Test hsvToRgb-method
<span class="nc bnc" id="L22" title="All 4 branches missed.">        assert Arrays.equals(hsvToRgb(0, 0, 0), new int[] { 0, 0, 0 });</span>
<span class="nc bnc" id="L23" title="All 4 branches missed.">        assert Arrays.equals(hsvToRgb(0, 0, 1), new int[] { 255, 255, 255 });</span>
<span class="nc bnc" id="L24" title="All 4 branches missed.">        assert Arrays.equals(hsvToRgb(0, 1, 1), new int[] { 255, 0, 0 });</span>
<span class="nc bnc" id="L25" title="All 4 branches missed.">        assert Arrays.equals(hsvToRgb(60, 1, 1), new int[] { 255, 255, 0 });</span>
<span class="nc bnc" id="L26" title="All 4 branches missed.">        assert Arrays.equals(hsvToRgb(120, 1, 1), new int[] { 0, 255, 0 });</span>
<span class="nc bnc" id="L27" title="All 4 branches missed.">        assert Arrays.equals(hsvToRgb(240, 1, 1), new int[] { 0, 0, 255 });</span>
<span class="nc bnc" id="L28" title="All 4 branches missed.">        assert Arrays.equals(hsvToRgb(300, 1, 1), new int[] { 255, 0, 255 });</span>
<span class="nc bnc" id="L29" title="All 4 branches missed.">        assert Arrays.equals(</span>
<span class="nc" id="L30">            hsvToRgb(180, 0.5, 0.5),</span>
            new int[] { 64, 128, 128 }
        );
<span class="nc bnc" id="L33" title="All 4 branches missed.">        assert Arrays.equals(</span>
<span class="nc" id="L34">            hsvToRgb(234, 0.14, 0.88),</span>
            new int[] { 193, 196, 224 }
        );
<span class="nc bnc" id="L37" title="All 4 branches missed.">        assert Arrays.equals(</span>
<span class="nc" id="L38">            hsvToRgb(330, 0.75, 0.5),</span>
            new int[] { 128, 32, 80 }
        );

        // Test rgbToHsv-method
        // approximate-assertions needed because of small deviations due to converting between
        // int-values and double-values.
<span class="nc bnc" id="L45" title="All 4 branches missed.">        assert approximatelyEqualHsv(</span>
<span class="nc" id="L46">            rgbToHsv(0, 0, 0),</span>
            new double[] { 0, 0, 0 }
        );
<span class="nc bnc" id="L49" title="All 4 branches missed.">        assert approximatelyEqualHsv(</span>
<span class="nc" id="L50">            rgbToHsv(255, 255, 255),</span>
            new double[] { 0, 0, 1 }
        );
<span class="nc bnc" id="L53" title="All 4 branches missed.">        assert approximatelyEqualHsv(</span>
<span class="nc" id="L54">            rgbToHsv(255, 0, 0),</span>
            new double[] { 0, 1, 1 }
        );
<span class="nc bnc" id="L57" title="All 4 branches missed.">        assert approximatelyEqualHsv(</span>
<span class="nc" id="L58">            rgbToHsv(255, 255, 0),</span>
            new double[] { 60, 1, 1 }
        );
<span class="nc bnc" id="L61" title="All 4 branches missed.">        assert approximatelyEqualHsv(</span>
<span class="nc" id="L62">            rgbToHsv(0, 255, 0),</span>
            new double[] { 120, 1, 1 }
        );
<span class="nc bnc" id="L65" title="All 4 branches missed.">        assert approximatelyEqualHsv(</span>
<span class="nc" id="L66">            rgbToHsv(0, 0, 255),</span>
            new double[] { 240, 1, 1 }
        );
<span class="nc bnc" id="L69" title="All 4 branches missed.">        assert approximatelyEqualHsv(</span>
<span class="nc" id="L70">            rgbToHsv(255, 0, 255),</span>
            new double[] { 300, 1, 1 }
        );
<span class="nc bnc" id="L73" title="All 4 branches missed.">        assert approximatelyEqualHsv(</span>
<span class="nc" id="L74">            rgbToHsv(64, 128, 128),</span>
            new double[] { 180, 0.5, 0.5 }
        );
<span class="nc bnc" id="L77" title="All 4 branches missed.">        assert approximatelyEqualHsv(</span>
<span class="nc" id="L78">            rgbToHsv(193, 196, 224),</span>
            new double[] { 234, 0.14, 0.88 }
        );
<span class="nc bnc" id="L81" title="All 4 branches missed.">        assert approximatelyEqualHsv(</span>
<span class="nc" id="L82">            rgbToHsv(128, 32, 80),</span>
            new double[] { 330, 0.75, 0.5 }
        );
<span class="nc" id="L85">    }</span>

    /**
     * Conversion from the HSV-representation to the RGB-representation.
     *
     * @param hue Hue of the color.
     * @param saturation Saturation of the color.
     * @param value Brightness-value of the color.
     * @return The tuple of RGB-components.
     */
    public static int[] hsvToRgb(double hue, double saturation, double value) {
<span class="nc bnc" id="L96" title="All 4 branches missed.">        if (hue &lt; 0 || hue &gt; 360) {</span>
<span class="nc" id="L97">            throw new IllegalArgumentException(</span>
                &quot;hue should be between 0 and 360&quot;
            );
        }

<span class="nc bnc" id="L102" title="All 4 branches missed.">        if (saturation &lt; 0 || saturation &gt; 1) {</span>
<span class="nc" id="L103">            throw new IllegalArgumentException(</span>
                &quot;saturation should be between 0 and 1&quot;
            );
        }

<span class="nc bnc" id="L108" title="All 4 branches missed.">        if (value &lt; 0 || value &gt; 1) {</span>
<span class="nc" id="L109">            throw new IllegalArgumentException(</span>
                &quot;value should be between 0 and 1&quot;
            );
        }

<span class="nc" id="L114">        double chroma = value * saturation;</span>
<span class="nc" id="L115">        double hueSection = hue / 60;</span>
<span class="nc" id="L116">        double secondLargestComponent =</span>
<span class="nc" id="L117">            chroma * (1 - Math.abs(hueSection % 2 - 1));</span>
<span class="nc" id="L118">        double matchValue = value - chroma;</span>

<span class="nc" id="L120">        return getRgbBySection(</span>
            hueSection,
            chroma,
            matchValue,
            secondLargestComponent
        );
    }

    /**
     * Conversion from the RGB-representation to the HSV-representation.
     *
     * @param red Red-component of the color.
     * @param green Green-component of the color.
     * @param blue Blue-component of the color.
     * @return The tuple of HSV-components.
     */
    public static double[] rgbToHsv(int red, int green, int blue) {
<span class="nc bnc" id="L137" title="All 4 branches missed.">        if (red &lt; 0 || red &gt; 255) {</span>
<span class="nc" id="L138">            throw new IllegalArgumentException(</span>
                &quot;red should be between 0 and 255&quot;
            );
        }

<span class="nc bnc" id="L143" title="All 4 branches missed.">        if (green &lt; 0 || green &gt; 255) {</span>
<span class="nc" id="L144">            throw new IllegalArgumentException(</span>
                &quot;green should be between 0 and 255&quot;
            );
        }

<span class="nc bnc" id="L149" title="All 4 branches missed.">        if (blue &lt; 0 || blue &gt; 255) {</span>
<span class="nc" id="L150">            throw new IllegalArgumentException(</span>
                &quot;blue should be between 0 and 255&quot;
            );
        }

<span class="nc" id="L155">        double dRed = (double) red / 255;</span>
<span class="nc" id="L156">        double dGreen = (double) green / 255;</span>
<span class="nc" id="L157">        double dBlue = (double) blue / 255;</span>
<span class="nc" id="L158">        double value = Math.max(Math.max(dRed, dGreen), dBlue);</span>
<span class="nc" id="L159">        double chroma = value - Math.min(Math.min(dRed, dGreen), dBlue);</span>
<span class="nc bnc" id="L160" title="All 2 branches missed.">        double saturation = value == 0 ? 0 : chroma / value;</span>
        double hue;

<span class="nc bnc" id="L163" title="All 2 branches missed.">        if (chroma == 0) {</span>
<span class="nc" id="L164">            hue = 0;</span>
<span class="nc bnc" id="L165" title="All 2 branches missed.">        } else if (value == dRed) {</span>
<span class="nc" id="L166">            hue = 60 * (0 + (dGreen - dBlue) / chroma);</span>
<span class="nc bnc" id="L167" title="All 2 branches missed.">        } else if (value == dGreen) {</span>
<span class="nc" id="L168">            hue = 60 * (2 + (dBlue - dRed) / chroma);</span>
        } else {
<span class="nc" id="L170">            hue = 60 * (4 + (dRed - dGreen) / chroma);</span>
        }

<span class="nc" id="L173">        hue = (hue + 360) % 360;</span>

<span class="nc" id="L175">        return new double[] { hue, saturation, value };</span>
    }

    private static boolean approximatelyEqualHsv(double[] hsv1, double[] hsv2) {
<span class="nc bnc" id="L179" title="All 2 branches missed.">        boolean bHue = Math.abs(hsv1[0] - hsv2[0]) &lt; 0.2;</span>
<span class="nc bnc" id="L180" title="All 2 branches missed.">        boolean bSaturation = Math.abs(hsv1[1] - hsv2[1]) &lt; 0.002;</span>
<span class="nc bnc" id="L181" title="All 2 branches missed.">        boolean bValue = Math.abs(hsv1[2] - hsv2[2]) &lt; 0.002;</span>

<span class="nc bnc" id="L183" title="All 6 branches missed.">        return bHue &amp;&amp; bSaturation &amp;&amp; bValue;</span>
    }

    private static int[] getRgbBySection(
        double hueSection,
        double chroma,
        double matchValue,
        double secondLargestComponent
    ) {
        int red;
        int green;
        int blue;

<span class="nc bnc" id="L196" title="All 4 branches missed.">        if (hueSection &gt;= 0 &amp;&amp; hueSection &lt;= 1) {</span>
<span class="nc" id="L197">            red = convertToInt(chroma + matchValue);</span>
<span class="nc" id="L198">            green = convertToInt(secondLargestComponent + matchValue);</span>
<span class="nc" id="L199">            blue = convertToInt(matchValue);</span>
<span class="nc bnc" id="L200" title="All 4 branches missed.">        } else if (hueSection &gt; 1 &amp;&amp; hueSection &lt;= 2) {</span>
<span class="nc" id="L201">            red = convertToInt(secondLargestComponent + matchValue);</span>
<span class="nc" id="L202">            green = convertToInt(chroma + matchValue);</span>
<span class="nc" id="L203">            blue = convertToInt(matchValue);</span>
<span class="nc bnc" id="L204" title="All 4 branches missed.">        } else if (hueSection &gt; 2 &amp;&amp; hueSection &lt;= 3) {</span>
<span class="nc" id="L205">            red = convertToInt(matchValue);</span>
<span class="nc" id="L206">            green = convertToInt(chroma + matchValue);</span>
<span class="nc" id="L207">            blue = convertToInt(secondLargestComponent + matchValue);</span>
<span class="nc bnc" id="L208" title="All 4 branches missed.">        } else if (hueSection &gt; 3 &amp;&amp; hueSection &lt;= 4) {</span>
<span class="nc" id="L209">            red = convertToInt(matchValue);</span>
<span class="nc" id="L210">            green = convertToInt(secondLargestComponent + matchValue);</span>
<span class="nc" id="L211">            blue = convertToInt(chroma + matchValue);</span>
<span class="nc bnc" id="L212" title="All 4 branches missed.">        } else if (hueSection &gt; 4 &amp;&amp; hueSection &lt;= 5) {</span>
<span class="nc" id="L213">            red = convertToInt(secondLargestComponent + matchValue);</span>
<span class="nc" id="L214">            green = convertToInt(matchValue);</span>
<span class="nc" id="L215">            blue = convertToInt(chroma + matchValue);</span>
        } else {
<span class="nc" id="L217">            red = convertToInt(chroma + matchValue);</span>
<span class="nc" id="L218">            green = convertToInt(matchValue);</span>
<span class="nc" id="L219">            blue = convertToInt(secondLargestComponent + matchValue);</span>
        }

<span class="nc" id="L222">        return new int[] { red, green, blue };</span>
    }

    private static int convertToInt(double input) {
<span class="nc" id="L226">        return (int) Math.round(255 * input);</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>